## -*- Mode: Autotest -*-
##
## File: testsuite.at
## Package: gfsm
## Description: autotest test-suite script
##

AT_INIT([gfsmutils])
AT_BANNER([gfsmutils: basic tests])

##vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
## Test: gfsmcompile: null
AT_SETUP([compile.null])

##-- compile: null
AT_DATA([null.gfst],[])
AT_CHECK([[$progdir/gfsmcompile $tdata/null.tfst -F null.gfst]],0,[],[])

##-- info: null
AT_DATA([null.inf],[])
rm -f expout; ln $tdata/null.inf expout
AT_CHECK([[$progdir/gfsminfo null.gfst]],0,expout)

AT_CLEANUP


##vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
## Test: gfsmcompile: simple
AT_SETUP([compile.simple])

##-- compile + print: simple
AT_DATA([t1.gfst],[])
AT_DATA([t1.tfst.out],[])
AT_CHECK([[$progdir/gfsmcompile $tdata/t1.tfst -F t1.gfst]],0)

rm -f expout; ln $tdata/t1.tfst expout
AT_CHECK([[$progdir/gfsmprint   t1.gfst]],0,expout,[])

rm -f expout; ln $tdata/t1.inf expout
AT_CHECK([[$progdir/gfsminfo   t1.gfst]],0,expout,[])

AT_CLEANUP
